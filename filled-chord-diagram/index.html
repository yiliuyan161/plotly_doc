
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://plotly.icopy.site/filled-chord-diagram/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Filled-Chord Diagrams with Plotly - plotly文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="white">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#filled-chord-diagrams-with-plotly" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="plotly文档" class="md-header__button md-logo" aria-label="plotly文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            plotly文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Filled-Chord Diagrams with Plotly
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="plotly文档" class="md-nav__button md-logo" aria-label="plotly文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    plotly文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1d-correlation/" class="md-nav__link">
        1d correlation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2D-Histogram/" class="md-nav__link">
        2D Histogram
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2d-histogram-contour/" class="md-nav__link">
        2d histogram contour
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2d-projection-of-3d-surface/" class="md-nav__link">
        2d projection of 3d surface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-axes/" class="md-nav__link">
        3d axes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-bubble-charts/" class="md-nav__link">
        3d bubble charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-camera-controls/" class="md-nav__link">
        3d camera controls
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-filled-line-plots/" class="md-nav__link">
        3d filled line plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-isosurface-plots/" class="md-nav__link">
        3d isosurface plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-line-plots/" class="md-nav__link">
        3d line plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-mesh/" class="md-nav__link">
        3d mesh
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-network-graph/" class="md-nav__link">
        3d network graph
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-parametric-plots/" class="md-nav__link">
        3d parametric plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-point-clustering/" class="md-nav__link">
        3d point clustering
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-scatter-plots/" class="md-nav__link">
        3d scatter plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-subplots/" class="md-nav__link">
        3d subplots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-surface-plots/" class="md-nav__link">
        3d surface plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-volume/" class="md-nav__link">
        3d volume
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3d-wireframe-plots/" class="md-nav__link">
        3d wireframe plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LaTeX/" class="md-nav__link">
        LaTeX
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../aggregations/" class="md-nav__link">
        Aggregations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../amazon-redshift/" class="md-nav__link">
        Amazon redshift
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../animations/" class="md-nav__link">
        Animations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../annotated-heatmap/" class="md-nav__link">
        Annotated heatmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../anova/" class="md-nav__link">
        Anova
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../apache-spark/" class="md-nav__link">
        Apache spark
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../average_multiple_curves/" class="md-nav__link">
        Average multiple curves
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../axes/" class="md-nav__link">
        Axes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bar-charts/" class="md-nav__link">
        Bar charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../baseline-detection/" class="md-nav__link">
        Baseline detection
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../baseline-subtraction/" class="md-nav__link">
        Baseline subtraction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../basic-statistics/" class="md-nav__link">
        Basic statistics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../big-data-analytics-with-pandas-and-sqlite/" class="md-nav__link">
        Big data analytics with pandas and sqlite
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../box-plots/" class="md-nav__link">
        Box plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bubble-charts/" class="md-nav__link">
        Bubble charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bubble-maps/" class="md-nav__link">
        Bubble maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../builtin-colorscales/" class="md-nav__link">
        Builtin colorscales
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bullet-charts/" class="md-nav__link">
        Bullet charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../candlestick-charts/" class="md-nav__link">
        Candlestick charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../carpet-contour/" class="md-nav__link">
        Carpet contour
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../carpet-plot/" class="md-nav__link">
        Carpet plot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../carpet-scatter/" class="md-nav__link">
        Carpet scatter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cars-exploration/" class="md-nav__link">
        Cars exploration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../categorical-axes/" class="md-nav__link">
        Categorical axes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../change-callbacks-datashader/" class="md-nav__link">
        Change callbacks datashader
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../chord-diagram/" class="md-nav__link">
        Chord Diagrams with Plotly
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../choropleth-maps/" class="md-nav__link">
        Choropleth maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../click-events/" class="md-nav__link">
        Click events
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cmocean-colorscales/" class="md-nav__link">
        Cmocean colorscales
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../colorscales/" class="md-nav__link">
        Colorscales
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cone-plot/" class="md-nav__link">
        Cone plot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration-options/" class="md-nav__link">
        Configuration options
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../continuous-error-bars/" class="md-nav__link">
        Continuous error bars
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contour-plots/" class="md-nav__link">
        Contour plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../convolution/" class="md-nav__link">
        Convolution
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../county-choropleth/" class="md-nav__link">
        County choropleth
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../create-online-dashboard-legacy/" class="md-nav__link">
        Create online dashboard legacy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../creating-and-updating-figures/" class="md-nav__link">
        Creating and updating figures
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../custom-buttons/" class="md-nav__link">
        Custom buttons
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dash/" class="md-nav__link">
        Dash
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../datashader/" class="md-nav__link">
        Datashader
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dendrogram/" class="md-nav__link">
        Dendrogram
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../density-plots/" class="md-nav__link">
        Density plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../discrete-color/" class="md-nav__link">
        Discrete color
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../discrete-frequency/" class="md-nav__link">
        Discrete frequency
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../distplot/" class="md-nav__link">
        Distplot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dot-plots/" class="md-nav__link">
        Dot plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dropdowns/" class="md-nav__link">
        Dropdowns
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ecdf-plots/" class="md-nav__link">
        Ecdf plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../error-bars/" class="md-nav__link">
        Error bars
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../exponential-fits/" class="md-nav__link">
        Exponential fits
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../facet-plots/" class="md-nav__link">
        Facet plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fft-filters/" class="md-nav__link">
        Fft filters
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-factories/" class="md-nav__link">
        Figure factories
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-factory-subplots/" class="md-nav__link">
        Figure factory subplots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-factory-table/" class="md-nav__link">
        Figure factory table
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-introspection/" class="md-nav__link">
        Figure introspection
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-labels/" class="md-nav__link">
        Figure labels
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figure-structure/" class="md-nav__link">
        Figure structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figurewidget-app/" class="md-nav__link">
        Figurewidget app
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../figurewidget/" class="md-nav__link">
        Figurewidget
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../filled-area-animation/" class="md-nav__link">
        Filled area animation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../filled-area-on-mapbox/" class="md-nav__link">
        Filled area on mapbox
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../filled-area-plots/" class="md-nav__link">
        Filled area plots
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Filled-Chord Diagrams with Plotly
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Filled-Chord Diagrams with Plotly
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ideograms" class="md-nav__link">
    Ideograms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ribbons-in-a-chord-diagram" class="md-nav__link">
    Ribbons in a chord diagram
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../filter/" class="md-nav__link">
        Filter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../frequency-counts/" class="md-nav__link">
        Frequency counts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../funnel-charts/" class="md-nav__link">
        Funnel charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gantt/" class="md-nav__link">
        Gantt
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gapminder-example/" class="md-nav__link">
        Gapminder example
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gauge-charts/" class="md-nav__link">
        Gauge charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../google_big_query/" class="md-nav__link">
        Google big query
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../graph-data-from-mysql-database-in-python/" class="md-nav__link">
        Graph data from mysql database in python
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../graph-objects/" class="md-nav__link">
        Graph objects
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../graphing-multiple-chart-types/" class="md-nav__link">
        Graphing multiple chart types
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../group-by/" class="md-nav__link">
        Group by
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../heatmap-animation/" class="md-nav__link">
        Heatmap animation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../heatmap-webgl/" class="md-nav__link">
        Heatmap webgl
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../heatmaps/" class="md-nav__link">
        Heatmaps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hexbin-mapbox/" class="md-nav__link">
        Hexbin mapbox
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../histograms/" class="md-nav__link">
        Histograms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../horizontal-bar-charts/" class="md-nav__link">
        Horizontal bar charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../horizontal-vertical-shapes/" class="md-nav__link">
        Horizontal vertical shapes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hover-text-and-formatting/" class="md-nav__link">
        Hover text and formatting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../html-reports/" class="md-nav__link">
        Html reports
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../icicle-charts/" class="md-nav__link">
        Icicle charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../igraph-networkx-comparison/" class="md-nav__link">
        Igraph networkx comparison
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../images/" class="md-nav__link">
        Images
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../imshow/" class="md-nav__link">
        Imshow
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../indicator/" class="md-nav__link">
        Indicator
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../insets/" class="md-nav__link">
        Insets
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../interact-decorator/" class="md-nav__link">
        Interact decorator
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../interactive-html-export/" class="md-nav__link">
        Interactive html export
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../interpolation-and-extrapolation-in-1d/" class="md-nav__link">
        Interpolation and extrapolation in 1d
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../interpolation-and-extrapolation-in-2d/" class="md-nav__link">
        Interpolation and extrapolation in 2d
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ipython-vs-python/" class="md-nav__link">
        Ipython vs python
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../jupyter-lab-tools/" class="md-nav__link">
        Jupyter lab tools
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../legacy-polar-chart/" class="md-nav__link">
        Legacy polar chart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../legend/" class="md-nav__link">
        Legend
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../line-and-scatter/" class="md-nav__link">
        Line and scatter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../line-charts/" class="md-nav__link">
        Line charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../linear-algebra/" class="md-nav__link">
        Linear algebra
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../linear-fits/" class="md-nav__link">
        Linear fits
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../linear-gauge-chart/" class="md-nav__link">
        Linear gauge chart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../lines-on-mapbox/" class="md-nav__link">
        Lines on mapbox
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../lines-on-maps/" class="md-nav__link">
        Lines on maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../log-plot/" class="md-nav__link">
        Log plot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../logos/" class="md-nav__link">
        Logos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../map-configuration/" class="md-nav__link">
        Map configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../map-subplots-and-small-multiples/" class="md-nav__link">
        Map subplots and small multiples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mapbox-county-choropleth/" class="md-nav__link">
        Mapbox county choropleth
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mapbox-density-heatmaps/" class="md-nav__link">
        Mapbox density heatmaps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mapbox-layers/" class="md-nav__link">
        Mapbox layers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../marginal-plots/" class="md-nav__link">
        Marginal plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../marker-style/" class="md-nav__link">
        Marker style
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../matplotlib-colorscales/" class="md-nav__link">
        Matplotlib colorscales
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mixed-subplots/" class="md-nav__link">
        Mixed subplots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml-knn/" class="md-nav__link">
        Ml knn
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml-pca/" class="md-nav__link">
        Ml pca
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml-regression/" class="md-nav__link">
        Ml regression
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml-roc-pr/" class="md-nav__link">
        Ml roc pr
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml-tsne-umap-projections/" class="md-nav__link">
        Ml tsne umap projections
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ml_apps/" class="md-nav__link">
        Ml apps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../multiple-axes/" class="md-nav__link">
        Multiple axes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../multiple-transforms/" class="md-nav__link">
        Multiple transforms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../network-graphs/" class="md-nav__link">
        Network graphs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../normality-test/" class="md-nav__link">
        Normality test
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../normalization/" class="md-nav__link">
        Normalization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../numerical-differentiation/" class="md-nav__link">
        Numerical differentiation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../numerical-integration/" class="md-nav__link">
        Numerical integration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ohlc-charts/" class="md-nav__link">
        Ohlc charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../orca-management/" class="md-nav__link">
        Orca management
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../outlier-test/" class="md-nav__link">
        Outlier test
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pandas-backend/" class="md-nav__link">
        Pandas backend
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parallel-categories-diagram/" class="md-nav__link">
        Parallel categories diagram
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parallel-coordinates-plot/" class="md-nav__link">
        Parallel coordinates plot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pattern-hatching-texture/" class="md-nav__link">
        Pattern hatching texture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pdf-reports/" class="md-nav__link">
        Pdf reports
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../peak-finding/" class="md-nav__link">
        Peak finding
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../peak-fitting/" class="md-nav__link">
        Peak fitting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../peak-integration/" class="md-nav__link">
        Peak integration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pie-charts/" class="md-nav__link">
        Pie charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plot-data-from-csv/" class="md-nav__link">
        Plot data from csv
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plotly-express/" class="md-nav__link">
        Plotly express
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../polar-chart/" class="md-nav__link">
        Polar chart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../polygon-area/" class="md-nav__link">
        Polygon area
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../polynomial-fits/" class="md-nav__link">
        Polynomial fits
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../population-pyramid-charts/" class="md-nav__link">
        Population pyramid charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../px-arguments/" class="md-nav__link">
        Px arguments
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quiver-plots/" class="md-nav__link">
        Quiver plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../radar-chart/" class="md-nav__link">
        Radar chart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../random-walk/" class="md-nav__link">
        Random walk
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../range-slider/" class="md-nav__link">
        Range slider
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../renderers/" class="md-nav__link">
        Displaying Figures
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ribbon-plots/" class="md-nav__link">
        Ribbon plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../salesforce/" class="md-nav__link">
        Salesforce
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sankey-diagram/" class="md-nav__link">
        Sankey diagram
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../scatter-plots-on-maps/" class="md-nav__link">
        Scatter plots on maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../scattermapbox/" class="md-nav__link">
        Scattermapbox
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../setting-graph-size/" class="md-nav__link">
        Setting graph size
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../shapes/" class="md-nav__link">
        Shapes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../simple-mathematics-operations/" class="md-nav__link">
        Simple mathematics operations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sliders/" class="md-nav__link">
        Sliders
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../smoothing/" class="md-nav__link">
        Smoothing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../splom/" class="md-nav__link">
        Splom
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../static-image-export/" class="md-nav__link">
        Static image export
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../statistics-charts/" class="md-nav__link">
        Statistics charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../streaming-tutorial/" class="md-nav__link">
        Streaming tutorial
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../streamline-plots/" class="md-nav__link">
        Streamline plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../streamtube-plot/" class="md-nav__link">
        Streamtube plot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../strip-charts/" class="md-nav__link">
        Strip charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../styling-plotly-express/" class="md-nav__link">
        Styling plotly express
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../subplots/" class="md-nav__link">
        Subplots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sunburst-charts/" class="md-nav__link">
        Sunburst charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../surface-triangulation/" class="md-nav__link">
        Surface triangulation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../t-test/" class="md-nav__link">
        T test
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../table-subplots/" class="md-nav__link">
        Table subplots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../table/" class="md-nav__link">
        Table
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ternary-contour/" class="md-nav__link">
        Ternary contour
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ternary-plots/" class="md-nav__link">
        Ternary plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ternary-scatter-contour/" class="md-nav__link">
        Ternary scatter contour
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tesla-supercharging-stations/" class="md-nav__link">
        Tesla supercharging stations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../text-and-annotations/" class="md-nav__link">
        Text and annotations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tick-formatting/" class="md-nav__link">
        Tick formatting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../time-series/" class="md-nav__link">
        Time series
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tree-plots/" class="md-nav__link">
        Tree plots
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../treemaps/" class="md-nav__link">
        Treemaps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../triangulation/" class="md-nav__link">
        Triangulation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../trisurf/" class="md-nav__link">
        Trisurf
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../userguide/" class="md-nav__link">
        Plotly for Python User Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../v4-migration/" class="md-nav__link">
        V4 migration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../violin/" class="md-nav__link">
        Violin
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../visualizing-mri-volume-slices/" class="md-nav__link">
        Visualizing mri volume slices
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../waterfall-charts/" class="md-nav__link">
        Waterfall charts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../webgl-text-and-annotations/" class="md-nav__link">
        Webgl text and annotations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../webgl-vs-svg/" class="md-nav__link">
        Webgl vs svg
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wide-form/" class="md-nav__link">
        Wide form
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wind-rose-charts/" class="md-nav__link">
        Wind rose charts
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ideograms" class="md-nav__link">
    Ideograms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ribbons-in-a-chord-diagram" class="md-nav__link">
    Ribbons in a chord diagram
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="filled-chord-diagrams-with-plotly">Filled-Chord Diagrams with Plotly<a class="headerlink" href="#filled-chord-diagrams-with-plotly" title="Permanent link">&para;</a></h1>
<p>Circular layout or <a href="https://en.wikipedia.org/wiki/Chord_diagram">Chord diagram</a> is a method of visualizing  data that describe relationships. It was intensively promoted  through <a href="http://circos.ca/">Circos</a>, a software package in Perl that  was initially designed for displaying genomic data.</p>
<p>M Bostock developed reusable charts  for <a href="http://bl.ocks.org/mbostock/4062006">chord diagrams</a> in d3.js. Two years ago on <a href="http://stackoverflow.com/questions/19105801/chord-diagram-in-python">stackoverflow</a>, the existence of a Python package for plotting chord diagrams was addressed, but the question was closed due to being <em>off topic</em>.<br> Here we show that a chord diagram can be generated in Python with Plotly. We illustrate the method of generating a chord diagram from data recorded in a square matrix. The rows and columns represent the same entities.</p>
<p>This example considers a community of 5 friends on Facebook. We record the number of comments posted by each member on the other friends' walls. The data table is given in the next cell:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="k">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="k">as</span> <span class="nn">ff</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Emma&#39;</span><span class="p">,</span> <span class="s1">&#39;Isabella&#39;</span><span class="p">,</span> <span class="s1">&#39;Ava&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Sophia&#39;</span><span class="p">,</span> <span class="s1">&#39;row-sum&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Emma&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">65</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Isabella&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">64</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Ava&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">64</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">73</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Sophia&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">84</span><span class="p">]]</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;Data-Table&#39;</span><span class="p">)</span>
</code></pre></div>
<p>The aim of our visualization is to illustrate the total number of posts by each community member, and the
flows of posts between pairs of friends.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">matrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">16</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">18</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span>
                 <span class="p">[</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">19</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">34</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="n">data_matrix</span><span class="p">):</span>
    <span class="n">L</span><span class="p">,</span> <span class="n">M</span><span class="o">=</span><span class="n">data_matrix</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">L</span><span class="o">!=</span><span class="n">M</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Data array must have (n,n) shape&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>

<span class="n">L</span><span class="o">=</span><span class="n">check_data</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
</code></pre></div>
<p>A chord diagram encodes information in two graphical objects:
  - ideograms, represented by   distinctly colored arcs of circles;
  - ribbons, that are planar shapes bounded by two quadratic Bezier curves and two arcs of circle,that can degenerate to a point;</p>
<h3 id="ideograms">Ideograms<a class="headerlink" href="#ideograms" title="Permanent link">&para;</a></h3>
<p>Summing up the entries on each matrix row, one gets a value (in our example this value is equal to the number of posts by a community member).
Let us denote by <code>total_comments</code> the total number of posts recorded in this community.</p>
<p>Theoretically the interval <code>[0, total_comments)</code> is mapped linearly onto the unit circle, identified with the interval $[0,2\pi)$.</p>
<p>For a better looking plot one proceeds as follows: starting from the angular position $0$, in counter-clockwise direction, one draws successively, around the unit circle,  two parallel arcs of length equal to a mapped row sum value, minus a fixed gap. Click the image below:</p>
<div>
    <a href="https://plot.ly/~empet/12234/" target="_blank" title="Ideograms" style="display: block; text-align: center;"><img src="https://plot.ly/~empet/12234.png" alt="Ideograms" style="max-width: 100%;width: 400px;"  width="400" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>
    <script data-plotly="empet:12234"  src="https://plot.ly/embed.js" async></script>
</div>

<p>Now we define the functions that process  data in order to get ideogram ends.</p>
<p>As we stressed the unit circle is oriented counter-clockwise.
In order to get  an arc of circle of  end angular
coordinates $\theta_0&lt;\theta_1$, we define a function <code>moduloAB</code> that resolves the case when an arc contains
the  point of angular coordinate $0$ (for example $\theta_0=2\pi-\pi/12$, $\theta_1=\pi/9$). The function corresponding to $a=-\pi, b=\pi$  allows to map the interval $[0,2\pi)$ onto $[-\pi, \pi)$. Via this transformation we have:</p>
<p>$\theta_0\mapsto \theta'_0=-\pi/12$, and</p>
<p>$ \theta_1=\mapsto \theta'_1=\pi/9$,</p>
<p>and now $\theta'_0&lt;\theta'_1$.</p>
<div class="highlight"><pre><span></span><code><span class="n">PI</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>

<span class="k">def</span> <span class="nf">moduloAB</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span> <span class="c1">#maps a real number onto the unit circle identified with</span>
                       <span class="c1">#the interval [a,b), b-a=2*PI</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">&gt;=</span><span class="n">b</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Incorrect interval ends&#39;</span><span class="p">)</span>
        <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">y</span><span class="o">+</span><span class="n">b</span> <span class="k">if</span> <span class="n">y</span><span class="o">&lt;</span><span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="o">+</span><span class="n">a</span>

<span class="k">def</span> <span class="nf">test_2PI</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span><span class="mi">2</span><span class="o">*</span><span class="n">PI</span>
</code></pre></div>
<p>Compute the row sums and the lengths of corresponding ideograms:</p>
<div class="highlight"><pre><span></span><code><span class="n">row_sum</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">k</span><span class="p">,:])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">)]</span>

<span class="c1">#set the gap between two consecutive ideograms</span>
<span class="n">gap</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">PI</span><span class="o">*</span><span class="mf">0.005</span>
<span class="n">ideogram_length</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">PI</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">row_sum</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">row_sum</span><span class="p">)</span><span class="o">-</span><span class="n">gap</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
</code></pre></div>
<p>The next function returns the list of  end angular coordinates for each ideogram arc:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_ideogram_ends</span><span class="p">(</span><span class="n">ideogram_len</span><span class="p">,</span> <span class="n">gap</span><span class="p">):</span>
    <span class="n">ideo_ends</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">left</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ideogram_len</span><span class="p">)):</span>
        <span class="n">right</span><span class="o">=</span><span class="n">left</span><span class="o">+</span><span class="n">ideogram_len</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">ideo_ends</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">])</span>
        <span class="n">left</span><span class="o">=</span><span class="n">right</span><span class="o">+</span><span class="n">gap</span>
    <span class="k">return</span> <span class="n">ideo_ends</span>

<span class="n">ideo_ends</span><span class="o">=</span><span class="n">get_ideogram_ends</span><span class="p">(</span><span class="n">ideogram_length</span><span class="p">,</span> <span class="n">gap</span><span class="p">)</span>
<span class="n">ideo_ends</span>
</code></pre></div>
<p>The function <code>make_ideogram_arc</code> returns equally spaced points on an ideogram arc, expressed as complex
numbers in polar form:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_ideogram_arc</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="c1"># R is the circle radius</span>
    <span class="c1"># phi is the list of ends angle coordinates of an arc</span>
    <span class="c1"># a is a parameter that controls the number of points to be evaluated on an arc</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">test_2PI</span><span class="p">(</span><span class="n">phi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">test_2PI</span><span class="p">(</span><span class="n">phi</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">phi</span><span class="o">=</span><span class="p">[</span><span class="n">moduloAB</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">PI</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">phi</span><span class="p">]</span>
    <span class="n">length</span><span class="o">=</span><span class="p">(</span><span class="n">phi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">phi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">%</span> <span class="mi">2</span><span class="o">*</span><span class="n">PI</span>
    <span class="n">nr</span><span class="o">=</span><span class="mi">5</span> <span class="k">if</span> <span class="n">length</span><span class="o">&lt;=</span><span class="n">PI</span><span class="o">/</span><span class="mi">4</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">length</span><span class="o">/</span><span class="n">PI</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">phi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">phi</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">phi</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">phi</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">nr</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">phi</span><span class="o">=</span><span class="p">[</span><span class="n">moduloAB</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="o">-</span><span class="n">PI</span><span class="p">,</span> <span class="n">PI</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">phi</span><span class="p">]</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">phi</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">phi</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">nr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">R</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span>
</code></pre></div>
<p>The real and imaginary parts of these complex numbers will be used to define the ideogram as a <a href="https://plot.ly/python/shapes/">Plotly
shape</a> bounded by a SVG path.</p>
<div class="highlight"><pre><span></span><code><span class="n">z</span><span class="o">=</span><span class="n">make_ideogram_arc</span><span class="p">(</span><span class="mf">1.3</span><span class="p">,</span> <span class="p">[</span><span class="mi">11</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">PI</span><span class="o">/</span><span class="mi">17</span><span class="p">])</span>
<span class="nb">print</span> <span class="n">z</span>
</code></pre></div>
<p>Set ideograms labels and colors:</p>
<div class="highlight"><pre><span></span><code><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Emma&#39;</span><span class="p">,</span> <span class="s1">&#39;Isabella&#39;</span><span class="p">,</span> <span class="s1">&#39;Ava&#39;</span><span class="p">,</span> <span class="s1">&#39;Olivia&#39;</span><span class="p">,</span> <span class="s1">&#39;Sophia&#39;</span><span class="p">]</span>
<span class="n">ideo_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rgba(244, 109, 67, 0.75)&#39;</span><span class="p">,</span>
             <span class="s1">&#39;rgba(253, 174, 97, 0.75)&#39;</span><span class="p">,</span>
             <span class="s1">&#39;rgba(254, 224, 139, 0.75)&#39;</span><span class="p">,</span>
             <span class="s1">&#39;rgba(217, 239, 139, 0.75)&#39;</span><span class="p">,</span>
             <span class="s1">&#39;rgba(166, 217, 106, 0.75)&#39;</span><span class="p">]</span><span class="c1">#brewer colors with alpha set on 0.75</span>
</code></pre></div>
<h3 id="ribbons-in-a-chord-diagram">Ribbons in a chord diagram<a class="headerlink" href="#ribbons-in-a-chord-diagram" title="Permanent link">&para;</a></h3>
<p>While ideograms illustrate how many comments posted each member of the Facebook community,  ribbons
give a comparative information on the flows of comments from one friend to another.</p>
<p>To illustrate this flow we map data onto the unit circle. More precisely, for each matrix row, $k$, the application:</p>
<p><code>t</code>$\mapsto$ <code>t*ideogram_length[k]/row_sum[k]</code></p>
<p>maps the interval <code>[0, row_sum[k]]</code> onto
the interval <code>[0, ideogram_length[k]]</code>. Hence each entry <code>matrix[k][j]</code> of the $k^{th}$  row is mapped to <code>matrix[k][j]*ideogram_length[k]/row_value[k]</code>.</p>
<p>The function <code>map_data</code> maps all matrix entries to the corresponding values in the intervals associated to ideograms:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">map_data</span><span class="p">(</span><span class="n">data_matrix</span><span class="p">,</span> <span class="n">row_value</span><span class="p">,</span> <span class="n">ideogram_length</span><span class="p">):</span>
    <span class="n">mapped</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">data_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span>  <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
        <span class="n">mapped</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">ideogram_length</span><span class="o">*</span><span class="n">data_matrix</span><span class="p">[:,</span><span class="n">j</span><span class="p">]</span><span class="o">/</span><span class="n">row_value</span>
    <span class="k">return</span> <span class="n">mapped</span>

<span class="n">mapped_data</span><span class="o">=</span><span class="n">map_data</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">row_sum</span><span class="p">,</span> <span class="n">ideogram_length</span><span class="p">)</span>
<span class="n">mapped_data</span>
</code></pre></div>
<ul>
<li>To each pair of values <code>(mapped_data[k][j], mapped_data[j][k])</code>, $k&lt;=j$,  one associates a ribbon, that is a curvilinear filled rectangle (that can be degenerate), having as opposite sides two subarcs of the $k^{th}$ ideogram, respectively $j^{th}$ ideogram, and two arcs of quadratic B&eacute;zier curves.</li>
</ul>
<p>Here we illustrate the ribbons associated to pairs <code>(mapped_data[0][j], mapped_data[j][0])</code>, $j=\overline{0,4}$,
that illustrate the flow of comments between Emma and all other friends, and  herself:</p>
<div>
    <a href="https://plot.ly/~empet/12519/" target="_blank" title="Ribbons" style="display: block; text-align: center;"><img src="https://plot.ly/~empet/12519.png" alt="Ribbons" style="max-width: 100%;width: 400px;"  width="400" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>
    <script data-plotly="empet:12519"  src="https://plot.ly/embed.js" async></script>
</div>

<ul>
<li>For a better looking chord diagram,
<a href="http://circos.ca/presentations/articles/vis_tables1/">Circos documentation</a> recommends to sort increasingly each row of the mapped_data.</li>
</ul>
<p>The  array <code>idx_sort</code>, defined below, has on each row the indices that sort the corresponding row in <code>mapped_data</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">idx_sort</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">mapped_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">idx_sort</span>
</code></pre></div>
<p>In the following we call ribbon ends, the lists <code>l=[l[0], l[1]]</code>, <code>r=[r[0], r[1]]</code> having as elements the angular coordinates
of the ends of arcs that are opposite sides in a ribbon. These arcs are sub-arcs in the internal boundaries of
the ideograms, connected by the ribbon
(see the image above).</p>
<ul>
<li>Compute the ribbon ends  and store them as tuples
in a list of lists ($L\times L$):</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_ribbon_ends</span><span class="p">(</span><span class="n">mapped_data</span><span class="p">,</span> <span class="n">ideo_ends</span><span class="p">,</span>  <span class="n">idx_sort</span><span class="p">):</span>
    <span class="n">L</span><span class="o">=</span><span class="n">mapped_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ribbon_boundary</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">L</span><span class="p">,</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
        <span class="n">start</span><span class="o">=</span><span class="n">ideo_ends</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ribbon_boundary</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">start</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">J</span><span class="o">=</span><span class="n">idx_sort</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ribbon_boundary</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">start</span><span class="o">+</span><span class="n">mapped_data</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">J</span><span class="p">]</span>
            <span class="n">start</span><span class="o">=</span><span class="n">ribbon_boundary</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[[(</span><span class="n">ribbon_boundary</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">],</span><span class="n">ribbon_boundary</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">)]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">)]</span>

<span class="n">ribbon_ends</span><span class="o">=</span><span class="n">make_ribbon_ends</span><span class="p">(</span><span class="n">mapped_data</span><span class="p">,</span> <span class="n">ideo_ends</span><span class="p">,</span>  <span class="n">idx_sort</span><span class="p">)</span>
<span class="nb">print</span> <span class="s1">&#39;ribbon ends starting from the ideogram[2]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ribbon_ends</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div>
<p>We note that <code>ribbon_ends[k][j]</code> correspond to <code>mapped_data[i][idx_sort[k][j]]</code>, i.e. the length of the arc of ends
in <code>ribbon_ends[k][j]</code> is equal to <code>mapped_data[i][idx_sort[k][j]]</code>.</p>
<p>Now we define a few functions that compute the  control points for B&eacute;zier ribbon sides.</p>
<p>The function <code>control_pts</code> returns the cartesian coordinates of  the  control points, $b_0, b_1, b_2$, supposed as being  initially located on the unit circle, and thus defined only by their angular coordinate.  The angular coordinate
of the point $b_1$ is the mean of angular coordinates of the points $b_0, b_2$.</p>
<p>Since for a  B&eacute;zier ribbon side only $b_0, b_2$ are placed on the unit circle, one gives <code>radius</code> as a parameter that controls position of $b_1$.  <code>radius</code> is the distance  of $b_1$ to the circle center.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">control_pts</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
    <span class="c1">#angle is a  3-list containing angular coordinates of the control points b0, b1, b2</span>
    <span class="c1">#radius is the distance from b1 to the  origin O(0,0)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">!=</span><span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidInputError</span><span class="p">(</span><span class="s1">&#39;angle must have len =3&#39;</span><span class="p">)</span>
    <span class="n">b_cplx</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">angle</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span>
    <span class="n">b_cplx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">radius</span><span class="o">*</span><span class="n">b_cplx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="n">b_cplx</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">b_cplx</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ctrl_rib_chords</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
    <span class="c1"># this function returns a 2-list containing control polygons of the two quadratic Bezier</span>
    <span class="c1">#curves that are opposite sides in a ribbon</span>
    <span class="c1">#l (r) the list of angular variables of the ribbon arc ends defining</span>
    <span class="c1">#the ribbon starting (ending) arc</span>
    <span class="c1"># radius is a common parameter for both control polygons</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">!=</span><span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">!=</span><span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;the arc ends must be elements in a list of len 2&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">control_pts</span><span class="p">([</span><span class="n">l</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="n">r</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span> <span class="n">radius</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
</code></pre></div>
<p>Each ribbon is colored with the color of one of the two  ideograms it connects.
We define an L-list of L-lists of colors for ribbons. Denote it by <code>ribbon_color</code>.</p>
<p><code>ribbon_color[k][j]</code> is the Plotly color string for the ribbon associated to <code>mapped_data[k][j]</code> and <code>mapped_data[j][k]</code>, i.e. the ribbon connecting two subarcs in the $k^{th}$, respectively, $j^{th}$ ideogram. Hence  this structure is symmetric.</p>
<p>Initially we define:</p>
<div class="highlight"><pre><span></span><code><span class="n">ribbon_color</span><span class="o">=</span><span class="p">[</span><span class="n">L</span><span class="o">*</span><span class="p">[</span><span class="n">ideo_colors</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">)]</span>
</code></pre></div>
<p>and then eventually we change the color in a few positions.</p>
<p>For our example we change:</p>
<div class="highlight"><pre><span></span><code><span class="n">ribbon_color</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">ribbon_color</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ribbon_color</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ribbon_color</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</code></pre></div>
<p>The symmetric locations are not modified, because  we do not access
<code>ribbon_color[k][j]</code>, $k&gt;j$, when drawing the ribbons.</p>
<p>Functions that return the Plotly SVG paths that are  ribbon boundaries:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_q_bezier</span><span class="p">(</span><span class="n">b</span><span class="p">):</span><span class="c1"># defines the Plotly SVG path for a quadratic Bezier curve defined by the</span>
                     <span class="c1">#list of its control points</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">!=</span><span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">valueError</span><span class="p">(</span><span class="s1">&#39;control poligon must have 3 points&#39;</span><span class="p">)</span>
    <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">b</span>
    <span class="k">return</span> <span class="s1">&#39;M &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;,&#39;</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="s1">&#39;Q &#39;</span><span class="o">+</span>\
                <span class="nb">str</span><span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">+</span>\
                <span class="nb">str</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">b</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.35</span><span class="p">),</span> <span class="p">(</span><span class="mf">3.745</span><span class="p">,</span> <span class="mf">1.47</span><span class="p">)]</span>

<span class="n">make_q_bezier</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div>
<p><code>make_ribbon_arc</code>  returns the Plotly SVG path corresponding to an arc represented by its end angular coordinates <code>theta0, theta1</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_ribbon_arc</span><span class="p">(</span><span class="n">theta0</span><span class="p">,</span> <span class="n">theta1</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">test_2PI</span><span class="p">(</span><span class="n">theta0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_2PI</span><span class="p">(</span><span class="n">theta1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">theta0</span> <span class="o">&lt;</span> <span class="n">theta1</span><span class="p">:</span>
            <span class="n">theta0</span><span class="o">=</span> <span class="n">moduloAB</span><span class="p">(</span><span class="n">theta0</span><span class="p">,</span> <span class="o">-</span><span class="n">PI</span><span class="p">,</span> <span class="n">PI</span><span class="p">)</span>
            <span class="n">theta1</span><span class="o">=</span> <span class="n">moduloAB</span><span class="p">(</span><span class="n">theta1</span><span class="p">,</span> <span class="o">-</span><span class="n">PI</span><span class="p">,</span> <span class="n">PI</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">theta0</span><span class="o">*</span><span class="n">theta1</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;incorrect angle coordinates for ribbon&#39;</span><span class="p">)</span>

        <span class="n">nr</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">40</span><span class="o">*</span><span class="p">(</span><span class="n">theta0</span><span class="o">-</span><span class="n">theta1</span><span class="p">)</span><span class="o">/</span><span class="n">PI</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nr</span><span class="o">&lt;=</span><span class="mi">2</span><span class="p">:</span> <span class="n">nr</span><span class="o">=</span><span class="mi">3</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">theta0</span><span class="p">,</span> <span class="n">theta1</span><span class="p">,</span> <span class="n">nr</span><span class="p">)</span>
        <span class="n">pts</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span><span class="c1"># points on arc in polar complex form</span>

        <span class="n">string_arc</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">theta</span><span class="p">)):</span>
            <span class="n">string_arc</span><span class="o">+=</span><span class="s1">&#39;L &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">pts</span><span class="o">.</span><span class="n">real</span><span class="p">[</span><span class="n">k</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">pts</span><span class="o">.</span><span class="n">imag</span><span class="p">[</span><span class="n">k</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; &#39;</span>
        <span class="k">return</span>   <span class="n">string_arc</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;the angle coordinates for an arc side of a ribbon must be in [0, 2*pi]&#39;</span><span class="p">)</span>

<span class="n">make_ribbon_arc</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div>
<p>Finally we are ready to define data and layout for the Plotly plot of the chord diagram.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_layout</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">plot_size</span><span class="p">):</span>
    <span class="n">axis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">showline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># hide axis line, grid, ticklabels and  title</span>
          <span class="n">zeroline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">showgrid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">showticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
          <span class="p">)</span>

    <span class="k">return</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                  <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">axis</span><span class="p">),</span>
                  <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">axis</span><span class="p">),</span>
                  <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">width</span><span class="o">=</span><span class="n">plot_size</span><span class="p">,</span>
                  <span class="n">height</span><span class="o">=</span><span class="n">plot_size</span><span class="p">,</span>
                  <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">25</span><span class="p">),</span>
                  <span class="n">hovermode</span><span class="o">=</span><span class="s1">&#39;closest&#39;</span><span class="p">,</span>
                  <span class="n">shapes</span><span class="o">=</span><span class="p">[]</span><span class="c1"># to this list one appends below the dicts defining the ribbon,</span>
                           <span class="c1">#respectively the ideogram shapes</span>
                 <span class="p">)</span>
</code></pre></div>
<p>Function that returns the Plotly shape of an ideogram:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_ideo_shape</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">line_color</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">):</span>
    <span class="c1">#line_color is the color of the shape boundary</span>
    <span class="c1">#fill_collor is the color assigned to an ideogram</span>
    <span class="k">return</span>  <span class="nb">dict</span><span class="p">(</span>
                  <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                  <span class="n">color</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span>
                  <span class="n">width</span><span class="o">=</span><span class="mf">0.45</span>
                 <span class="p">),</span>

            <span class="n">path</span><span class="o">=</span>  <span class="n">path</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;path&#39;</span><span class="p">,</span>
            <span class="n">fillcolor</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
            <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;below&#39;</span>
        <span class="p">)</span>
</code></pre></div>
<p>We generate two types of ribbons: a ribbon connecting subarcs in two distinct ideograms, respectively
a ribbon from one ideogram to itself (it corresponds to <code>mapped_data[k][k]</code>, i.e. it gives the flow of comments
from a community member to herself).</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_ribbon</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">line_color</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">):</span>
    <span class="c1">#l=[l[0], l[1]], r=[r[0], r[1]]  represent the opposite arcs in the ribbon</span>
    <span class="c1">#line_color is the color of the shape boundary</span>
    <span class="c1">#fill_color is the fill color for the ribbon shape</span>
    <span class="n">poligon</span><span class="o">=</span><span class="n">ctrl_rib_chords</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="n">r</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
    <span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span><span class="n">poligon</span>

    <span class="k">return</span>  <span class="nb">dict</span><span class="p">(</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">color</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span>
            <span class="p">),</span>
            <span class="n">path</span><span class="o">=</span>  <span class="n">make_q_bezier</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="n">make_ribbon_arc</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span>
                   <span class="n">make_q_bezier</span><span class="p">(</span><span class="n">c</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">make_ribbon_arc</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;path&#39;</span><span class="p">,</span>
            <span class="n">fillcolor</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
            <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;below&#39;</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">make_self_rel</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">line_color</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
    <span class="c1">#radius is the radius of Bezier control point b_1</span>
    <span class="n">b</span><span class="o">=</span><span class="n">control_pts</span><span class="p">([</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">radius</span><span class="p">)</span>
    <span class="k">return</span>  <span class="nb">dict</span><span class="p">(</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">color</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span>
            <span class="p">),</span>
            <span class="n">path</span><span class="o">=</span>  <span class="n">make_q_bezier</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="n">make_ribbon_arc</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;path&#39;</span><span class="p">,</span>
            <span class="n">fillcolor</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
            <span class="n">layer</span><span class="o">=</span><span class="s1">&#39;below&#39;</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">invPerm</span><span class="p">(</span><span class="n">perm</span><span class="p">):</span>
    <span class="c1"># function that returns the inverse of a permutation, perm</span>
    <span class="n">inv</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">perm</span><span class="p">):</span>
        <span class="n">inv</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">inv</span>

<span class="n">layout</span><span class="o">=</span><span class="n">make_layout</span><span class="p">(</span><span class="s1">&#39;Chord diagram&#39;</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
</code></pre></div>
<p>Now let us explain the key point of associating  ribbons  to right data:</p>
<p>From the definition of <code>ribbon_ends</code> we notice that <code>ribbon_ends[k][j]</code> corresponds to data stored in
<code>matrix[k][sigma[j]]</code>, where <code>sigma</code> is the permutation of indices $0, 1, \ldots L-1$, that sort the row k in <code>mapped_data</code>.
If <code>sigma_inv</code> is the inverse permutation of <code>sigma</code>, we get that to <code>matrix[k][j]</code> corresponds the
<code>ribbon_ends[k][sigma_inv[j]]</code>.</p>
<p><code>ribbon_info</code> is a list of dicts setting the information that is displayed when hovering the mouse over the  ribbon ends.</p>
<p>Set the radius of B&eacute;zier control point, $b_1$, for each ribbon associated to a diagonal data entry:</p>
<div class="highlight"><pre><span></span><code><span class="n">radii_sribb</span><span class="o">=</span><span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.39</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">]</span><span class="c1"># these value are set after a few trials</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ribbon_info</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>

    <span class="n">sigma</span><span class="o">=</span><span class="n">idx_sort</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
    <span class="n">sigma_inv</span><span class="o">=</span><span class="n">invPerm</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">L</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">matrix</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">matrix</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="k">continue</span>
        <span class="n">eta</span><span class="o">=</span><span class="n">idx_sort</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">eta_inv</span><span class="o">=</span><span class="n">invPerm</span><span class="p">(</span><span class="n">eta</span><span class="p">)</span>
        <span class="n">l</span><span class="o">=</span><span class="n">ribbon_ends</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">sigma_inv</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>

        <span class="k">if</span> <span class="n">j</span><span class="o">==</span><span class="n">k</span><span class="p">:</span>
            <span class="n">layout</span><span class="p">[</span><span class="s1">&#39;shapes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_self_rel</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="s1">&#39;rgb(175,175,175)&#39;</span> <span class="p">,</span>
                                    <span class="n">ideo_colors</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">radius</span><span class="o">=</span><span class="n">radii_sribb</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
            <span class="n">z</span><span class="o">=</span><span class="mf">0.9</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="c1">#the text below will be displayed when hovering the mouse over the ribbon</span>
            <span class="n">text</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; commented on &#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">k</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; of &#39;</span><span class="o">+</span> <span class="s1">&#39;herself Fb posts&#39;</span><span class="p">,</span>
            <span class="n">ribbon_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">],</span>
                                       <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span>
                                       <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
                                       <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="n">k</span><span class="p">]),</span>
                                       <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                                       <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">&#39;text&#39;</span>
                                       <span class="p">)</span>
                              <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span><span class="o">=</span><span class="n">ribbon_ends</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">eta_inv</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span>
            <span class="n">zi</span><span class="o">=</span><span class="mf">0.9</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">zf</span><span class="o">=</span><span class="mf">0.9</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="c1">#texti and textf are the strings that will be displayed when hovering the mouse</span>
            <span class="c1">#over the two ribbon ends</span>
            <span class="n">texti</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; commented on &#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; of &#39;</span><span class="o">+</span>\
                  <span class="n">labels</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">+</span> <span class="s1">&#39; Fb posts&#39;</span><span class="p">,</span>

            <span class="n">textf</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; commented on &#39;</span><span class="o">+</span> <span class="s1">&#39;</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; of &#39;</span><span class="o">+</span>\
            <span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span> <span class="s1">&#39; Fb posts&#39;</span><span class="p">,</span>
            <span class="n">ribbon_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">zi</span><span class="o">.</span><span class="n">real</span><span class="p">],</span>
                                       <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">zi</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span>
                                       <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
                                       <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ribbon_color</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span>
                                       <span class="n">text</span><span class="o">=</span><span class="n">texti</span><span class="p">,</span>
                                       <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">&#39;text&#39;</span>
                                       <span class="p">)</span>
                              <span class="p">),</span>
            <span class="n">ribbon_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">zf</span><span class="o">.</span><span class="n">real</span><span class="p">],</span>
                                       <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">zf</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span>
                                       <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
                                       <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ribbon_color</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span>
                                       <span class="n">text</span><span class="o">=</span><span class="n">textf</span><span class="p">,</span>
                                       <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">&#39;text&#39;</span>
                                       <span class="p">)</span>
                              <span class="p">)</span>
            <span class="n">r</span><span class="o">=</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="c1">#IMPORTANT!!!  Reverse these arc ends because otherwise you get</span>
                          <span class="c1"># a twisted ribbon</span>
            <span class="c1">#append the ribbon shape</span>
            <span class="n">layout</span><span class="p">[</span><span class="s1">&#39;shapes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_ribbon</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="s1">&#39;rgb(175,175,175)&#39;</span> <span class="p">,</span> <span class="n">ribbon_color</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span>
</code></pre></div>
<p><code>ideograms</code> is a list of dicts that set the position, and color of ideograms, as well as the information associated to each ideogram.</p>
<div class="highlight"><pre><span></span><code><span class="n">ideograms</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ideo_ends</span><span class="p">)):</span>
    <span class="n">z</span><span class="o">=</span> <span class="n">make_ideogram_arc</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">ideo_ends</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    <span class="n">zi</span><span class="o">=</span><span class="n">make_ideogram_arc</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">ideo_ends</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    <span class="n">m</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    <span class="n">n</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">zi</span><span class="p">)</span>
    <span class="n">ideograms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                             <span class="n">y</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                             <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines&#39;</span><span class="p">,</span>
                             <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">ideo_colors</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">shape</span><span class="o">=</span><span class="s1">&#39;spline&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.25</span><span class="p">),</span>
                             <span class="n">text</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;&lt;br&gt;&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">{:d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">row_sum</span><span class="p">[</span><span class="n">k</span><span class="p">]),</span>
                             <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">&#39;text&#39;</span>
                             <span class="p">)</span>
                     <span class="p">)</span>


    <span class="n">path</span><span class="o">=</span><span class="s1">&#39;M &#39;</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="n">path</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">[</span><span class="n">s</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">[</span><span class="n">s</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; L &#39;</span>

    <span class="n">Zi</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">zi</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="n">path</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">Zi</span><span class="o">.</span><span class="n">real</span><span class="p">[</span><span class="n">s</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Zi</span><span class="o">.</span><span class="n">imag</span><span class="p">[</span><span class="n">s</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; L &#39;</span>
    <span class="n">path</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; ,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">layout</span><span class="p">[</span><span class="s1">&#39;shapes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_ideo_shape</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;rgb(150,150,150)&#39;</span> <span class="p">,</span> <span class="n">ideo_colors</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Data</span><span class="p">(</span><span class="n">ideograms</span><span class="o">+</span><span class="n">ribbon_info</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">plotly.offline</span> <span class="k">as</span> <span class="nn">off</span>
<span class="n">off</span><span class="o">.</span><span class="n">init_notebook_mode</span><span class="p">()</span>

<span class="n">off</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;chord-diagram-Fb&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span>
<span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Data</span><span class="p">(</span><span class="n">ribbon_info</span><span class="o">+</span><span class="n">ideograms</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;chord-diagram-Fb&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Here is a chord diagram associated to a community of 8 Facebook friends:</p>
<div>
    <a href="https://plot.ly/~empet/12148/" target="_blank" title="Diagram of Facebook Comments" style="display: block; text-align: center;"><img src="https://plot.ly/~empet/12148.png" alt="Ideograms" style="max-width: 100%;width: 400px;"  width="400" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>
    <script data-plotly="empet:12148"  src="https://plot.ly/embed.js" async></script>
</div>

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;link href=&quot;//fonts.googleapis.com/css?family=Open+Sans:600,400,300,200|Inconsolata|Ubuntu+Mono:400,700&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;&#39;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://help.plot.ly/documentation/all_static/css/ipython-notebook-custom.css&quot;&gt;&#39;</span><span class="p">))</span>

<span class="err">!</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">publisher</span> <span class="o">--</span><span class="n">upgrade</span>
<span class="kn">import</span> <span class="nn">publisher</span>
<span class="n">publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
    <span class="s1">&#39;filled-chord.ipynb&#39;</span><span class="p">,</span> <span class="s1">&#39;python/filled-chord-diagram/&#39;</span><span class="p">,</span> <span class="s1">&#39;Python Filled Chord Diagram&#39;</span><span class="p">,</span>
    <span class="s1">&#39;How to make an interactive filled-chord diagram in Python with Plotly and iGraph. &#39;</span><span class="p">,</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Filled Chord Diagram&#39;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Filled Chord Diagram | Plotly&quot;</span><span class="p">,</span>
    <span class="n">thumbnail</span><span class="o">=</span><span class="s1">&#39;thumbnail/filled-chord.jpg&#39;</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">,</span>
    <span class="n">has_thumbnail</span><span class="o">=</span><span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="n">display_as</span><span class="o">=</span><span class="s1">&#39;scientific&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="n">ipynb</span><span class="o">=</span> <span class="s1">&#39;~notebook_demo/191&#39;</span><span class="p">)</span>
</code></pre></div>
                
                  
                
              
              
                

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-XXXXXXXXXXX"
     data-ad-slot="XXXXXXX"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../filled-area-plots/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Filled area plots" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Filled area plots
            </div>
          </div>
        </a>
      
      
        
        <a href="../filter/" class="md-footer__link md-footer__link--next" aria-label="下一页: Filter" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              Filter
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>